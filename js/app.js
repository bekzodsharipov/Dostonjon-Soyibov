document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".registerBtn"),t=document.getElementById("registrationModal"),n=document.getElementById("closeModalBtn"),o=document.querySelector(".homeModalOverlay"),d=document.getElementById("registrationForm"),l=document.getElementById("name"),i=document.getElementById("nameError"),a=document.getElementById("phone"),r=document.getElementById("phoneError"),s=document.getElementById("submitBtn"),c=window.phoneFormatter;let m=!1,u=0;function y(){t&&(m=!0,u=window.scrollY,t.style.display="block",document.body.style.overflow="hidden",i.style.display="none",r.style.display="none")}function p(){t&&m&&(m=!1,t.style.display="none",document.body.style.overflow="",document.body.style.position="",document.body.style.top="",window.scrollTo(0,u))}e.forEach((e=>e.addEventListener("click",y))),n&&n.addEventListener("click",p),o&&o.addEventListener("click",p),d.addEventListener("submit",(function(e){if(e.preventDefault(),!c)return console.error("phoneFormatter is not initialized. Check formatter.js load order and p/g variables."),void(r.style.display="block");const t=l.value.trim(),n=a.value.trim();let o=!1;if(t?i.style.display="none":(i.style.display="block",o=!0),c.validate(n)?r.style.display="none":(r.style.display="block",o=!0),o)return;s.textContent="YUBORILMOQDA...",s.disabled=!0;const d=new Date,m=d.toLocaleDateString("uz-UZ"),u=d.toLocaleTimeString("uz-UZ"),y={Ism:t,TelefonRaqam:c.getCurrentCode()+" "+n,SanaSoat:m+" - "+u};localStorage.setItem("formData",JSON.stringify(y)),window.location.href="/thankYou.html",s.textContent="DAVOM ETISH",s.disabled=!1,l.value="",a.value="",p()}))})),function(){const e=document.getElementById("loadVideo"),t=document.getElementById("videoWrap");if(!e||!t)return;let n=!1;function o(){const e=document.createElement("wistia-player");e.setAttribute("media-id","4kiatuarko"),e.setAttribute("aspect","1.7777777777777777"),t.appendChild(e),t.classList.add("is-loaded")}e.addEventListener("click",(function(){if(n)return;if(n=!0,e.disabled=!0,window.customElements&&customElements.get("wistia-player"))return void o();const t=document.createElement("script");t.src="https://fast.wistia.com/player.js",t.async=!0,t.onload=()=>{o()},t.onerror=()=>{n=!1,e.disabled=!1},document.head.appendChild(t)}),{passive:!0})}();