document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".registerBtn"),t=document.getElementById("registrationModal"),n=document.getElementById("closeModalBtn"),o=document.querySelector(".homeModalOverlay"),d=document.getElementById("registrationForm"),i=document.getElementById("name"),l=document.getElementById("nameError"),r=document.getElementById("phone"),a=document.getElementById("phoneError"),s=document.getElementById("submitBtn"),c=window.phoneFormatter;let m=!1,y=0;function u(){t&&(m=!0,y=window.scrollY,t.style.display="block",document.body.style.overflow="hidden",l.style.display="none",a.style.display="none")}function p(){t&&m&&(m=!1,t.style.display="none",document.body.style.overflow="",document.body.style.position="",document.body.style.top="",window.scrollTo(0,y))}e.forEach((e=>e.addEventListener("click",u))),n&&n.addEventListener("click",p),o&&o.addEventListener("click",p),d.addEventListener("submit",(function(e){if(e.preventDefault(),!c)return console.error("phoneFormatter is not initialized. Check formatter.js load order and p/g variables."),void(a.style.display="block");const t=i.value.trim(),n=r.value.trim();let o=!1;if(t?l.style.display="none":(l.style.display="block",o=!0),c.validate(n)?a.style.display="none":(a.style.display="block",o=!0),o)return;s.textContent="YUBORILMOQDA...",s.disabled=!0;const d=new Date,m=d.toLocaleDateString("uz-UZ"),y=d.toLocaleTimeString("uz-UZ"),u={Ism:t,TelefonRaqam:c.getCurrentCode()+" "+n,SanaSoat:m+" - "+y};localStorage.setItem("formData",JSON.stringify(u)),window.location.href="/thankYou.html",s.textContent="DAVOM ETISH",s.disabled=!1,i.value="",r.value="",p()}))})),function(){const e=document.getElementById("loadVideo"),t=document.getElementById("videoWrap");if(!e||!t)return;let n=!1;function o(){if(n)return;n=!0;const e=document.createElement("script");e.src="https://fast.wistia.com/player.js",e.async=!0,e.onload=()=>{t.innerHTML='<wistia-player media-id="4kiatuarko" aspect="1.7777777777777777"></wistia-player>'},document.head.appendChild(e)}if(e.addEventListener("click",o,{passive:!0}),"IntersectionObserver"in window){const e=new IntersectionObserver((t=>{t.some((e=>e.isIntersecting))&&(o(),e.disconnect())}),{rootMargin:"200px 0px"});e.observe(t)}}();